"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk_1 = require("@aws-cdk/cdk");
const route53_generated_1 = require("../route53.generated");
const _util_1 = require("./_util");
/**
 * A record to delegate further lookups to a different set of name servers
 */
class ZoneDelegationRecord extends cdk_1.Construct {
    constructor(parent, name, props) {
        super(parent, name);
        const ttl = props.ttl === undefined ? 172800 : props.ttl;
        new route53_generated_1.cloudformation.RecordSetResource(this, 'Resource', {
            hostedZoneId: parent.hostedZoneId,
            name: _util_1.determineFullyQualifiedDomainName(props.delegatedZoneName, parent),
            type: 'NS',
            ttl: ttl.toString(),
            comment: props.comment,
            resourceRecords: props.nameServers.map(ns => ns.endsWith('.') ? ns : `${ns}.`)
        });
    }
}
exports.ZoneDelegationRecord = ZoneDelegationRecord;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS1kZWxlZ2F0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiem9uZS1kZWxlZ2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQXlDO0FBRXpDLDREQUFzRDtBQUN0RCxtQ0FBNEQ7QUE0QjVEOztHQUVHO0FBQ0gsTUFBYSxvQkFBcUIsU0FBUSxlQUFTO0lBQ2pELFlBQVksTUFBcUIsRUFBRSxJQUFZLEVBQUUsS0FBZ0M7UUFDL0UsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUVwQixNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBRTFELElBQUksa0NBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQ3JELFlBQVksRUFBRSxNQUFNLENBQUMsWUFBWTtZQUNqQyxJQUFJLEVBQUUseUNBQWlDLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQztZQUN4RSxJQUFJLEVBQUUsSUFBSTtZQUNWLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxFQUFFO1lBQ25CLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztZQUN0QixlQUFlLEVBQUUsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7U0FDL0UsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBZkQsb0RBZUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdAYXdzLWNkay9jZGsnO1xuaW1wb3J0IHsgSG9zdGVkWm9uZVJlZiB9IGZyb20gJy4uL2hvc3RlZC16b25lLXJlZic7XG5pbXBvcnQgeyBjbG91ZGZvcm1hdGlvbiB9IGZyb20gJy4uL3JvdXRlNTMuZ2VuZXJhdGVkJztcbmltcG9ydCB7IGRldGVybWluZUZ1bGx5UXVhbGlmaWVkRG9tYWluTmFtZSB9IGZyb20gJy4vX3V0aWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFpvbmVEZWxlZ2F0aW9uUmVjb3JkUHJvcHMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHpvbmUgdGhhdCBkZWxlZ2F0aW9uIGlzIG1hZGUgdG8uXG4gICAqL1xuICBkZWxlZ2F0ZWRab25lTmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBzZXJ2ZXJzIHRvIHJlcG9ydCBpbiB0aGUgZGVsZWdhdGlvbiByZWNvcmRzLlxuICAgKi9cbiAgbmFtZVNlcnZlcnM6IHN0cmluZ1tdO1xuXG4gIC8qKlxuICAgKiBUaGUgVFRMIG9mIHRoZSB6b25lIGRlbGVnYXRpb24gcmVjb3Jkcy5cbiAgICpcbiAgICogQGRlZmF1bHQgMTcyODAwIHNlY29uZHMuXG4gICAqL1xuICB0dGw/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEFueSBjb21tZW50cyB0aGF0IHlvdSB3YW50IHRvIGluY2x1ZGUgYWJvdXQgdGhlIHpvbmUgZGVsZWdhdGlvbiByZWNvcmRzLlxuICAgKlxuICAgKiBAZGVmYXVsdCBubyBjb21tZW50LlxuICAgKi9cbiAgY29tbWVudD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBBIHJlY29yZCB0byBkZWxlZ2F0ZSBmdXJ0aGVyIGxvb2t1cHMgdG8gYSBkaWZmZXJlbnQgc2V0IG9mIG5hbWUgc2VydmVyc1xuICovXG5leHBvcnQgY2xhc3MgWm9uZURlbGVnYXRpb25SZWNvcmQgZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICBjb25zdHJ1Y3RvcihwYXJlbnQ6IEhvc3RlZFpvbmVSZWYsIG5hbWU6IHN0cmluZywgcHJvcHM6IFpvbmVEZWxlZ2F0aW9uUmVjb3JkUHJvcHMpIHtcbiAgICBzdXBlcihwYXJlbnQsIG5hbWUpO1xuXG4gICAgY29uc3QgdHRsID0gcHJvcHMudHRsID09PSB1bmRlZmluZWQgPyAxNzJfODAwIDogcHJvcHMudHRsO1xuXG4gICAgbmV3IGNsb3VkZm9ybWF0aW9uLlJlY29yZFNldFJlc291cmNlKHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgIGhvc3RlZFpvbmVJZDogcGFyZW50Lmhvc3RlZFpvbmVJZCxcbiAgICAgIG5hbWU6IGRldGVybWluZUZ1bGx5UXVhbGlmaWVkRG9tYWluTmFtZShwcm9wcy5kZWxlZ2F0ZWRab25lTmFtZSwgcGFyZW50KSxcbiAgICAgIHR5cGU6ICdOUycsXG4gICAgICB0dGw6IHR0bC50b1N0cmluZygpLFxuICAgICAgY29tbWVudDogcHJvcHMuY29tbWVudCxcbiAgICAgIHJlc291cmNlUmVjb3JkczogcHJvcHMubmFtZVNlcnZlcnMubWFwKG5zID0+IG5zLmVuZHNXaXRoKCcuJykgPyBucyA6IGAke25zfS5gKVxuICAgIH0pO1xuICB9XG59XG4iXX0=