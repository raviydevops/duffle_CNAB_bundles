"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const events = require("@aws-cdk/aws-events");
const cdk = require("@aws-cdk/cdk");
const artifact_1 = require("./artifact");
const validation = require("./validation");
var ActionCategory;
(function (ActionCategory) {
    ActionCategory["Source"] = "Source";
    ActionCategory["Build"] = "Build";
    ActionCategory["Test"] = "Test";
    ActionCategory["Approval"] = "Approval";
    ActionCategory["Deploy"] = "Deploy";
    ActionCategory["Invoke"] = "Invoke";
})(ActionCategory = exports.ActionCategory || (exports.ActionCategory = {}));
function defaultBounds() {
    return {
        minInputs: 0,
        maxInputs: 5,
        minOutputs: 0,
        maxOutputs: 5
    };
}
exports.defaultBounds = defaultBounds;
/**
 * Low-level class for generic CodePipeline Actions.
 * It is recommended that concrete types are used instead, such as {@link codecommit.PipelineSourceAction} or
 * {@link codebuild.PipelineBuildAction}.
 */
class Action extends cdk.Construct {
    constructor(parent, id, props) {
        super(parent, id);
        this.inputArtifacts = new Array();
        this.outputArtifacts = new Array();
        validation.validateName('Action', id);
        this.owner = props.owner || 'AWS';
        this.version = props.version || '1';
        this.category = props.category;
        this.provider = props.provider;
        this.region = props.region;
        this.configuration = props.configuration;
        this.artifactBounds = props.artifactBounds;
        this.runOrder = props.runOrder === undefined ? 1 : props.runOrder;
        this.stage = props.stage;
        this.stage._internal._attachAction(this);
    }
    validate() {
        return validation.validateArtifactBounds('input', this.inputArtifacts, this.artifactBounds.minInputs, this.artifactBounds.maxInputs, this.category, this.provider)
            .concat(validation.validateArtifactBounds('output', this.outputArtifacts, this.artifactBounds.minOutputs, this.artifactBounds.maxOutputs, this.category, this.provider));
    }
    onStateChange(name, target, options) {
        const rule = new events.EventRule(this.parent, name, options);
        rule.addTarget(target);
        rule.addEventPattern({
            detailType: ['CodePipeline Stage Execution State Change'],
            source: ['aws.codepipeline'],
            resources: [this.stage.pipeline.pipelineArn],
            detail: {
                stage: [this.stage.name],
                action: [this.id],
            },
        });
        return rule;
    }
    get _inputArtifacts() {
        return this.inputArtifacts.slice();
    }
    get _outputArtifacts() {
        return this.outputArtifacts.slice();
    }
    addOutputArtifact(name = this.stage._internal._generateOutputArtifactName(this)) {
        const artifact = new artifact_1.Artifact(this, name);
        this.outputArtifacts.push(artifact);
        return artifact;
    }
    addInputArtifact(artifact = this.stage._internal._findInputArtifact(this)) {
        this.inputArtifacts.push(artifact);
        return this;
    }
}
exports.Action = Action;
// export class ElasticBeanstalkDeploy extends DeployAction {
//   constructor(parent: Stage, name: string, applicationName: string, environmentName: string) {
//     super(parent, name, 'ElasticBeanstalk', { minInputs: 1, maxInputs: 1, minOutputs: 0, maxOutputs: 0 }, {
//       ApplicationName: applicationName,
//       EnvironmentName: environmentName
//     });
//   }
// }
// export class OpsWorksDeploy extends DeployAction {
//   constructor(parent: Stage, name: string, app: string, stack: string, layer?: string) {
//     super(parent, name, 'OpsWorks', { minInputs: 1, maxInputs: 1, minOutputs: 0, maxOutputs: 0 }, {
//       Stack: stack,
//       App: app,
//       Layer: layer,
//     });
//   }
// }
// export class ECSDeploy extends DeployAction {
//   constructor(parent: Stage, name: string, clusterName: string, serviceName: string, fileName?: string) {
//     super(parent, name, 'ECS', { minInputs: 1, maxInputs: 1, minOutputs: 0, maxOutputs: 0 }, {
//       ClusterName: clusterName,
//       ServiceName: serviceName,
//       FileName: fileName,
//     });
//   }
// }
/*
  TODO: A Jenkins build needs a corresponding custom action for each "Jenkins provider".
    This should be created automatically.

  Example custom action created to execute Jenkins:
  {
  "id": {
    "category": "Test",
    "provider": "<provider name>",
    "owner": "Custom",
    "version": "1"
  },
  "outputArtifactDetails": {
    "minimumCount": 0,
    "maximumCount": 5
  },
  "settings": {
    "executionUrlTemplate": "https://www.google.com/job/{Config:ProjectName}/{ExternalExecutionId}",
    "entityUrlTemplate": "https://www.google.com/job/{Config:ProjectName}"
  },
  "actionConfigurationProperties": [
    {
      "queryable": true,
      "key": true,
      "name": "ProjectName",
      "required": true,
      "secret": false
    }
  ],
  "inputArtifactDetails": {
    "minimumCount": 0,
    "maximumCount": 5
  }
  }
*/
// export class JenkinsBuild extends BuildAction {
//   constructor(parent: Stage, name: string, jenkinsProvider: string, project: string) {
//     super(parent, name, jenkinsProvider, DefaultBounds(), {
//       ProjectName: project
//     });
//   }
// }
// export class JenkinsTest extends TestAction {
//   constructor(parent: Stage, name: string, jenkinsProvider: string, project: string) {
//     super(parent, name, jenkinsProvider, DefaultBounds(), {
//       ProjectName: project
//     });
//   }
// }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYWN0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsOENBQStDO0FBRS9DLG9DQUFxQztBQUNyQyx5Q0FBc0M7QUFDdEMsMkNBQTRDO0FBRTVDLElBQVksY0FPWDtBQVBELFdBQVksY0FBYztJQUN4QixtQ0FBaUIsQ0FBQTtJQUNqQixpQ0FBZSxDQUFBO0lBQ2YsK0JBQWEsQ0FBQTtJQUNiLHVDQUFxQixDQUFBO0lBQ3JCLG1DQUFpQixDQUFBO0lBQ2pCLG1DQUFpQixDQUFBO0FBQ25CLENBQUMsRUFQVyxjQUFjLEdBQWQsc0JBQWMsS0FBZCxzQkFBYyxRQU96QjtBQWdCRCxTQUFnQixhQUFhO0lBQzNCLE9BQU87UUFDTCxTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRSxDQUFDO1FBQ1osVUFBVSxFQUFFLENBQUM7UUFDYixVQUFVLEVBQUUsQ0FBQztLQUNkLENBQUM7QUFDSixDQUFDO0FBUEQsc0NBT0M7QUEySUQ7Ozs7R0FJRztBQUNILE1BQXNCLE1BQU8sU0FBUSxHQUFHLENBQUMsU0FBUztJQWdEaEQsWUFBWSxNQUFxQixFQUFFLEVBQVUsRUFBRSxLQUFrQjtRQUMvRCxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBTkgsbUJBQWMsR0FBRyxJQUFJLEtBQUssRUFBWSxDQUFDO1FBQ3ZDLG9CQUFlLEdBQUcsSUFBSSxLQUFLLEVBQVksQ0FBQztRQU92RCxVQUFVLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUV0QyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUM7UUFDcEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBQy9CLElBQUksQ0FBQyxR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R0FBaUc7QUFDakcsOEdBQThHO0FBQzlHLDBDQUEwQztBQUMxQyx5Q0FBeUM7QUFDekMsVUFBVTtBQUNWLE1BQU07QUFDTixJQUFJO0FBRUoscURBQXFEO0FBQ3JELDJGQUEyRjtBQUMzRixzR0FBc0c7QUFDdEcsc0JBQXNCO0FBQ3RCLGtCQUFrQjtBQUNsQixzQkFBc0I7QUFDdEIsVUFBVTtBQUNWLE1BQU07QUFDTixJQUFJO0FBRUosZ0RBQWdEO0FBQ2hELDRHQUE0RztBQUM1RyxpR0FBaUc7QUFDakcsa0NBQWtDO0FBQ2xDLGtDQUFrQztBQUNsQyw0QkFBNEI7QUFDNUIsVUFBVTtBQUNWLE1BQU07QUFDTixJQUFJO0FBRUo7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFrQ0U7QUFFRixrREFBa0Q7QUFDbEQseUZBQXlGO0FBQ3pGLDhEQUE4RDtBQUM5RCw2QkFBNkI7QUFDN0IsVUFBVTtBQUNWLE1BQU07QUFDTixJQUFJO0FBRUosZ0RBQWdEO0FBQ2hELHlGQUF5RjtBQUN6Riw4REFBOEQ7QUFDOUQsNkJBQTZCO0FBQzdCLFVBQVU7QUFDVixNQUFNO0FBQ04sSUFBSSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBldmVudHMgPSByZXF1aXJlKCdAYXdzLWNkay9hd3MtZXZlbnRzJyk7XG5pbXBvcnQgaWFtID0gcmVxdWlyZSgnQGF3cy1jZGsvYXdzLWlhbScpO1xuaW1wb3J0IGNkayA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2NkaycpO1xuaW1wb3J0IHsgQXJ0aWZhY3QgfSBmcm9tICcuL2FydGlmYWN0JztcbmltcG9ydCB2YWxpZGF0aW9uID0gcmVxdWlyZSgnLi92YWxpZGF0aW9uJyk7XG5cbmV4cG9ydCBlbnVtIEFjdGlvbkNhdGVnb3J5IHtcbiAgU291cmNlID0gJ1NvdXJjZScsXG4gIEJ1aWxkID0gJ0J1aWxkJyxcbiAgVGVzdCA9ICdUZXN0JyxcbiAgQXBwcm92YWwgPSAnQXBwcm92YWwnLFxuICBEZXBsb3kgPSAnRGVwbG95JyxcbiAgSW52b2tlID0gJ0ludm9rZSdcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgdGhlIGNvbnN0cmFpbnRzIG9uIHRoZSBudW1iZXIgb2YgaW5wdXQgYW5kIG91dHB1dFxuICogYXJ0aWZhY3RzIGFuIGFjdGlvbiBjYW4gaGF2ZS5cbiAqXG4gKiBUaGUgY29uc3RyYWludHMgZm9yIGVhY2ggYWN0aW9uIHR5cGUgYXJlIGRvY3VtZW50ZWQgb24gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2NvZGVwaXBlbGluZS9sYXRlc3QvdXNlcmd1aWRlL3JlZmVyZW5jZS1waXBlbGluZS1zdHJ1Y3R1cmUuaHRtbCBQaXBlbGluZSBTdHJ1Y3R1cmUgUmVmZXJlbmNlfSBwYWdlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbkFydGlmYWN0Qm91bmRzIHtcbiAgcmVhZG9ubHkgbWluSW5wdXRzOiBudW1iZXI7XG4gIHJlYWRvbmx5IG1heElucHV0czogbnVtYmVyO1xuICByZWFkb25seSBtaW5PdXRwdXRzOiBudW1iZXI7XG4gIHJlYWRvbmx5IG1heE91dHB1dHM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRCb3VuZHMoKTogQWN0aW9uQXJ0aWZhY3RCb3VuZHMge1xuICByZXR1cm4ge1xuICAgIG1pbklucHV0czogMCxcbiAgICBtYXhJbnB1dHM6IDUsXG4gICAgbWluT3V0cHV0czogMCxcbiAgICBtYXhPdXRwdXRzOiA1XG4gIH07XG59XG5cbi8qKlxuICogVGhlIEFQSSBvZiBTdGFnZSB1c2VkIGludGVybmFsbHkgYnkgdGhlIENvZGVQaXBlbGluZSBDb25zdHJ1Y3QuXG4gKiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gY2FsbCBhbnkgb2YgdGhlIG1ldGhvZHMgaW5zaWRlIG9mIGl0IHlvdXJzZWxmLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElJbnRlcm5hbFN0YWdlIHtcbiAgLyoqXG4gICAqIEFkZHMgYW4gQWN0aW9uIHRvIHRoaXMgU3RhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSBhY3Rpb24gdGhlIEFjdGlvbiB0byBhZGQgdG8gdGhpcyBTdGFnZVxuICAgKi9cbiAgX2F0dGFjaEFjdGlvbihhY3Rpb246IEFjdGlvbik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBvdXRwdXQgYXJ0aWZhY3QgbmFtZSBmb3IgdGhlIGdpdmVuIEFjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGFjdGlvbiB0aGUgQWN0aW9uIHRvIGdlbmVyYXRlIHRoZSBvdXRwdXQgYXJ0aWZhY3QgbmFtZSBmb3JcbiAgICovXG4gIF9nZW5lcmF0ZU91dHB1dEFydGlmYWN0TmFtZShhY3Rpb246IEFjdGlvbik6IHN0cmluZztcblxuICAvKipcbiAgICogRmluZHMgYW4gaW5wdXQgYXJ0aWZhY3QgZm9yIHRoZSBnaXZlbiBBY3Rpb24uXG4gICAqIFRoZSBjaG9zZW4gYXJ0aWZhY3Qgd2lsbCBiZSB0aGUgb3V0cHV0IGFydGlmYWN0IG9mIHRoZVxuICAgKiBsYXN0IEFjdGlvbiBpbiB0aGUgUGlwZWxpbmVcbiAgICogKHVwIHRvIHRoZSBTdGFnZSB0aGlzIEFjdGlvbiBiZWxvbmdzIHRvKVxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHJ1bk9yZGVyIHRoYXQgaGFzIGFuIG91dHB1dCBhcnRpZmFjdC5cbiAgICpcbiAgICogQHBhcmFtIGFjdGlvbiB0aGUgQWN0aW9uIHRvIGZpbmQgdGhlIGlucHV0IGFydGlmYWN0IGZvclxuICAgKi9cbiAgX2ZpbmRJbnB1dEFydGlmYWN0KGFjdGlvbjogQWN0aW9uKTogQXJ0aWZhY3Q7XG59XG5cbi8qKlxuICogVGhlIGFic3RyYWN0IHZpZXcgb2YgYW4gQVdTIENvZGVQaXBlbGluZSBhcyByZXF1aXJlZCBhbmQgdXNlZCBieSBBY3Rpb25zLlxuICogSXQgZXh0ZW5kcyB7QGxpbmsgZXZlbnRzLklFdmVudFJ1bGVUYXJnZXR9LFxuICogc28gdGhpcyBpbnRlcmZhY2UgY2FuIGJlIHVzZWQgYXMgYSBUYXJnZXQgZm9yIENsb3VkV2F0Y2ggRXZlbnRzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElQaXBlbGluZSBleHRlbmRzIGV2ZW50cy5JRXZlbnRSdWxlVGFyZ2V0IHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBQaXBlbGluZS5cbiAgICovXG4gIHJlYWRvbmx5IHBpcGVsaW5lTmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgQVJOIG9mIHRoZSBQaXBlbGluZS5cbiAgICovXG4gIHJlYWRvbmx5IHBpcGVsaW5lQXJuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSB1bmlxdWUgSUQgb2YgdGhlIFBpcGVsaW5lIENvbnN0cnVjdC5cbiAgICovXG4gIHJlYWRvbmx5IHVuaXF1ZUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBzZXJ2aWNlIFJvbGUgb2YgdGhlIFBpcGVsaW5lLlxuICAgKi9cbiAgcmVhZG9ubHkgcm9sZTogaWFtLlJvbGU7XG5cbiAgLyoqXG4gICAqIEdyYW50cyByZWFkIHBlcm1pc3Npb25zIHRvIHRoZSBQaXBlbGluZSdzIFMzIEJ1Y2tldCB0byB0aGUgZ2l2ZW4gSWRlbnRpdHkuXG4gICAqXG4gICAqIEBwYXJhbSBpZGVudGl0eSB0aGUgSUFNIElkZW50aXR5IHRvIGdyYW50IHRoZSBwZXJtaXNzaW9ucyB0b1xuICAgKi9cbiAgZ3JhbnRCdWNrZXRSZWFkKGlkZW50aXR5PzogaWFtLklQcmluY2lwYWwpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBHcmFudHMgcmVhZCAmIHdyaXRlIHBlcm1pc3Npb25zIHRvIHRoZSBQaXBlbGluZSdzIFMzIEJ1Y2tldCB0byB0aGUgZ2l2ZW4gSWRlbnRpdHkuXG4gICAqXG4gICAqIEBwYXJhbSBpZGVudGl0eSB0aGUgSUFNIElkZW50aXR5IHRvIGdyYW50IHRoZSBwZXJtaXNzaW9ucyB0b1xuICAgKi9cbiAgZ3JhbnRCdWNrZXRSZWFkV3JpdGUoaWRlbnRpdHk/OiBpYW0uSVByaW5jaXBhbCk6IHZvaWQ7XG59XG5cbi8qKlxuICogVGhlIGFic3RyYWN0IGludGVyZmFjZSBvZiBhIFBpcGVsaW5lIFN0YWdlIHRoYXQgaXMgdXNlZCBieSBBY3Rpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTdGFnZSB7XG4gIC8qKlxuICAgKiBUaGUgcGh5c2ljYWwsIGh1bWFuLXJlYWRhYmxlIG5hbWUgb2YgdGhpcyBQaXBlbGluZSBTdGFnZS5cbiAgICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIFBpcGVsaW5lIHRoaXMgU3RhZ2UgYmVsb25ncyB0by5cbiAgICovXG4gIHJlYWRvbmx5IHBpcGVsaW5lOiBJUGlwZWxpbmU7XG5cbiAgLyoqXG4gICAqIFRoZSBBUEkgb2YgU3RhZ2UgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBDb2RlUGlwZWxpbmUgQ29uc3RydWN0LlxuICAgKiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gY2FsbCBhbnkgb2YgdGhlIG1ldGhvZHMgaW5zaWRlIG9mIGl0IHlvdXJzZWxmLlxuICAgKi9cbiAgcmVhZG9ubHkgX2ludGVybmFsOiBJSW50ZXJuYWxTdGFnZTtcbn1cblxuLyoqXG4gKiBDb21tb24gcHJvcGVydGllcyBzaGFyZWQgYnkgYWxsIEFjdGlvbnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbW9uQWN0aW9uUHJvcHMge1xuICAvKipcbiAgICogVGhlIHJ1bk9yZGVyIHByb3BlcnR5IGZvciB0aGlzIEFjdGlvbi5cbiAgICogUnVuT3JkZXIgZGV0ZXJtaW5lcyB0aGUgcmVsYXRpdmUgb3JkZXIgaW4gd2hpY2ggbXVsdGlwbGUgQWN0aW9ucyBpbiB0aGUgc2FtZSBTdGFnZSBleGVjdXRlLlxuICAgKlxuICAgKiBAZGVmYXVsdCAxXG4gICAqIEBzZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2NvZGVwaXBlbGluZS9sYXRlc3QvdXNlcmd1aWRlL3JlZmVyZW5jZS1waXBlbGluZS1zdHJ1Y3R1cmUuaHRtbFxuICAgKi9cbiAgcnVuT3JkZXI/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQ29tbW9uIHByb3BlcnRpZXMgc2hhcmVkIGJ5IGFsbCBBY3Rpb24gQ29uc3RydWN0cy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21tb25BY3Rpb25Db25zdHJ1Y3RQcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgUGlwZWxpbmUgU3RhZ2UgdG8gYWRkIHRoaXMgQWN0aW9uIHRvLlxuICAgKi9cbiAgc3RhZ2U6IElTdGFnZTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3Rpb24gcHJvcGVydGllcyBvZiB0aGUgbG93LWxldmVsIHtAbGluayBBY3Rpb24gQWN0aW9uIGNsYXNzfS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25Qcm9wcyBleHRlbmRzIENvbW1vbkFjdGlvblByb3BzLCBDb21tb25BY3Rpb25Db25zdHJ1Y3RQcm9wcyB7XG4gIGNhdGVnb3J5OiBBY3Rpb25DYXRlZ29yeTtcbiAgcHJvdmlkZXI6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHJlZ2lvbiB0aGlzIEFjdGlvbiByZXNpZGVzIGluLlxuICAgKlxuICAgKiBAZGVmYXVsdCB0aGUgQWN0aW9uIHJlc2lkZXMgaW4gdGhlIHNhbWUgcmVnaW9uIGFzIHRoZSBQaXBlbGluZVxuICAgKi9cbiAgcmVnaW9uPzogc3RyaW5nO1xuXG4gIGFydGlmYWN0Qm91bmRzOiBBY3Rpb25BcnRpZmFjdEJvdW5kcztcbiAgY29uZmlndXJhdGlvbj86IGFueTtcbiAgdmVyc2lvbj86IHN0cmluZztcbiAgb3duZXI/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogTG93LWxldmVsIGNsYXNzIGZvciBnZW5lcmljIENvZGVQaXBlbGluZSBBY3Rpb25zLlxuICogSXQgaXMgcmVjb21tZW5kZWQgdGhhdCBjb25jcmV0ZSB0eXBlcyBhcmUgdXNlZCBpbnN0ZWFkLCBzdWNoIGFzIHtAbGluayBjb2RlY29tbWl0LlBpcGVsaW5lU291cmNlQWN0aW9ufSBvclxuICoge0BsaW5rIGNvZGVidWlsZC5QaXBlbGluZUJ1aWxkQWN0aW9ufS5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFjdGlvbiBleHRlbmRzIGNkay5Db25zdHJ1Y3Qge1xuICAvKipcbiAgICogVGhlIGNhdGVnb3J5IG9mIHRoZSBhY3Rpb24uXG4gICAqIFRoZSBjYXRlZ29yeSBkZWZpbmVzIHdoaWNoIGFjdGlvbiB0eXBlIHRoZSBvd25lclxuICAgKiAodGhlIGVudGl0eSB0aGF0IHBlcmZvcm1zIHRoZSBhY3Rpb24pIHBlcmZvcm1zLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5OiBBY3Rpb25DYXRlZ29yeTtcblxuICAvKipcbiAgICogVGhlIHNlcnZpY2UgcHJvdmlkZXIgdGhhdCB0aGUgYWN0aW9uIGNhbGxzLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHByb3ZpZGVyOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBBV1MgcmVnaW9uIHRoZSBnaXZlbiBBY3Rpb24gcmVzaWRlcyBpbi5cbiAgICogTm90ZSB0aGF0IGEgY3Jvc3MtcmVnaW9uIFBpcGVsaW5lIHJlcXVpcmVzIHJlcGxpY2F0aW9uIGJ1Y2tldHMgdG8gZnVuY3Rpb24gY29ycmVjdGx5LlxuICAgKiBZb3UgY2FuIHByb3ZpZGUgdGhlaXIgbmFtZXMgd2l0aCB0aGUge0BsaW5rIFBpcGVsaW5lUHJvcHMjY3Jvc3NSZWdpb25SZXBsaWNhdGlvbkJ1Y2tldHN9IHByb3BlcnR5LlxuICAgKiBJZiB5b3UgZG9uJ3QsIHRoZSBDb2RlUGlwZWxpbmUgQ29uc3RydWN0IHdpbGwgY3JlYXRlIG5ldyBTdGFja3MgaW4geW91ciBDREsgYXBwIGNvbnRhaW5pbmcgdGhvc2UgYnVja2V0cyxcbiAgICogdGhhdCB5b3Ugd2lsbCBuZWVkIHRvIGBjZGsgZGVwbG95YCBiZWZvcmUgZGVwbG95aW5nIHRoZSBtYWluLCBQaXBlbGluZS1jb250YWluaW5nIFN0YWNrLlxuICAgKlxuICAgKiBAZGVmYXVsdCB0aGUgQWN0aW9uIHJlc2lkZXMgaW4gdGhlIHNhbWUgcmVnaW9uIGFzIHRoZSBQaXBlbGluZVxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHJlZ2lvbj86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGFjdGlvbidzIGNvbmZpZ3VyYXRpb24uIFRoZXNlIGFyZSBrZXktdmFsdWUgcGFpcnMgdGhhdCBzcGVjaWZ5IGlucHV0IHZhbHVlcyBmb3IgYW4gYWN0aW9uLlxuICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBBV1MgQ29kZVBpcGVsaW5lIFVzZXIgR3VpZGUuXG4gICAqXG4gICAqIGh0dHA6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2NvZGVwaXBlbGluZS9sYXRlc3QvdXNlcmd1aWRlL3JlZmVyZW5jZS1waXBlbGluZS1zdHJ1Y3R1cmUuaHRtbCNhY3Rpb24tcmVxdWlyZW1lbnRzXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgY29uZmlndXJhdGlvbj86IGFueTtcblxuICAvKipcbiAgICogVGhlIG9yZGVyIGluIHdoaWNoIEFXUyBDb2RlUGlwZWxpbmUgcnVucyB0aGlzIGFjdGlvbi5cbiAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVdTIENvZGVQaXBlbGluZSBVc2VyIEd1aWRlLlxuICAgKlxuICAgKiBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vY29kZXBpcGVsaW5lL2xhdGVzdC91c2VyZ3VpZGUvcmVmZXJlbmNlLXBpcGVsaW5lLXN0cnVjdHVyZS5odG1sI2FjdGlvbi1yZXF1aXJlbWVudHNcbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBydW5PcmRlcjogbnVtYmVyO1xuXG4gIHB1YmxpYyByZWFkb25seSBvd25lcjogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgdmVyc2lvbjogc3RyaW5nO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaW5wdXRBcnRpZmFjdHMgPSBuZXcgQXJyYXk8QXJ0aWZhY3Q+KCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgb3V0cHV0QXJ0aWZhY3RzID0gbmV3IEFycmF5PEFydGlmYWN0PigpO1xuICBwcml2YXRlIHJlYWRvbmx5IGFydGlmYWN0Qm91bmRzOiBBY3Rpb25BcnRpZmFjdEJvdW5kcztcbiAgcHJpdmF0ZSByZWFkb25seSBzdGFnZTogSVN0YWdlO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudDogY2RrLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IEFjdGlvblByb3BzKSB7XG4gICAgc3VwZXIocGFyZW50LCBpZCk7XG5cbiAgICB2YWxpZGF0aW9uLnZhbGlkYXRlTmFtZSgnQWN0aW9uJywgaWQpO1xuXG4gICAgdGhpcy5vd25lciA9IHByb3BzLm93bmVyIHx8ICdBV1MnO1xuICAgIHRoaXMudmVyc2lvbiA9IHByb3BzLnZlcnNpb24gfHwgJzEnO1xuICAgIHRoaXMuY2F0ZWdvcnkgPSBwcm9wcy5jYXRlZ29yeTtcbiAgICB0aGlzLnByb3ZpZGVyID0gcHJvcHMucHJvdmlkZXI7XG4gICAgdGhpcy5yZWdpb24gPSBwcm9wcy5yZWdpb247XG4gICAgdGhpcy5jb25maWd1cmF0aW9uID0gcHJvcHMuY29uZmlndXJhdGlvbjtcbiAgICB0aGlzLmFydGlmYWN0Qm91bmRzID0gcHJvcHMuYXJ0aWZhY3RCb3VuZHM7XG4gICAgdGhpcy5ydW5PcmRlciA9IHByb3BzLnJ1bk9yZGVyID09PSB1bmRlZmluZWQgPyAxIDogcHJvcHMucnVuT3JkZXI7XG4gICAgdGhpcy5zdGFnZSA9IHByb3BzLnN0YWdlO1xuXG4gICAgdGhpcy5zdGFnZS5faW50ZXJuYWwuX2F0dGFjaEFjdGlvbih0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyB2YWxpZGF0ZSgpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb24udmFsaWRhdGVBcnRpZmFjdEJvdW5kcygnaW5wdXQnLCB0aGlzLmlucHV0QXJ0aWZhY3RzLCB0aGlzLmFydGlmYWN0Qm91bmRzLm1pbklucHV0cyxcbiAgICAgICAgdGhpcy5hcnRpZmFjdEJvdW5kcy5tYXhJbnB1dHMsIHRoaXMuY2F0ZWdvcnksIHRoaXMucHJvdmlkZXIpXG4gICAgICAuY29uY2F0KHZhbGlkYXRpb24udmFsaWRhdGVBcnRpZmFjdEJvdW5kcygnb3V0cHV0JywgdGhpcy5vdXRwdXRBcnRpZmFjdHMsIHRoaXMuYXJ0aWZhY3RCb3VuZHMubWluT3V0cHV0cyxcbiAgICAgICAgdGhpcy5hcnRpZmFjdEJvdW5kcy5tYXhPdXRwdXRzLCB0aGlzLmNhdGVnb3J5LCB0aGlzLnByb3ZpZGVyKVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgb25TdGF0ZUNoYW5nZShuYW1lOiBzdHJpbmcsIHRhcmdldD86IGV2ZW50cy5JRXZlbnRSdWxlVGFyZ2V0LCBvcHRpb25zPzogZXZlbnRzLkV2ZW50UnVsZVByb3BzKSB7XG4gICAgY29uc3QgcnVsZSA9IG5ldyBldmVudHMuRXZlbnRSdWxlKHRoaXMucGFyZW50ISEsIG5hbWUsIG9wdGlvbnMpO1xuICAgIHJ1bGUuYWRkVGFyZ2V0KHRhcmdldCk7XG4gICAgcnVsZS5hZGRFdmVudFBhdHRlcm4oe1xuICAgICAgZGV0YWlsVHlwZTogWyAnQ29kZVBpcGVsaW5lIFN0YWdlIEV4ZWN1dGlvbiBTdGF0ZSBDaGFuZ2UnIF0sXG4gICAgICBzb3VyY2U6IFsgJ2F3cy5jb2RlcGlwZWxpbmUnIF0sXG4gICAgICByZXNvdXJjZXM6IFsgdGhpcy5zdGFnZS5waXBlbGluZS5waXBlbGluZUFybiBdLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHN0YWdlOiBbIHRoaXMuc3RhZ2UubmFtZSBdLFxuICAgICAgICBhY3Rpb246IFsgdGhpcy5pZCBdLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgX2lucHV0QXJ0aWZhY3RzKCk6IEFydGlmYWN0W10ge1xuICAgIHJldHVybiB0aGlzLmlucHV0QXJ0aWZhY3RzLnNsaWNlKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IF9vdXRwdXRBcnRpZmFjdHMoKTogQXJ0aWZhY3RbXSB7XG4gICAgcmV0dXJuIHRoaXMub3V0cHV0QXJ0aWZhY3RzLnNsaWNlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYWRkT3V0cHV0QXJ0aWZhY3QobmFtZTogc3RyaW5nID0gdGhpcy5zdGFnZS5faW50ZXJuYWwuX2dlbmVyYXRlT3V0cHV0QXJ0aWZhY3ROYW1lKHRoaXMpKTogQXJ0aWZhY3Qge1xuICAgIGNvbnN0IGFydGlmYWN0ID0gbmV3IEFydGlmYWN0KHRoaXMsIG5hbWUpO1xuICAgIHRoaXMub3V0cHV0QXJ0aWZhY3RzLnB1c2goYXJ0aWZhY3QpO1xuICAgIHJldHVybiBhcnRpZmFjdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhZGRJbnB1dEFydGlmYWN0KGFydGlmYWN0OiBBcnRpZmFjdCA9IHRoaXMuc3RhZ2UuX2ludGVybmFsLl9maW5kSW5wdXRBcnRpZmFjdCh0aGlzKSk6IEFjdGlvbiB7XG4gICAgdGhpcy5pbnB1dEFydGlmYWN0cy5wdXNoKGFydGlmYWN0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG4vLyBleHBvcnQgY2xhc3MgRWxhc3RpY0JlYW5zdGFsa0RlcGxveSBleHRlbmRzIERlcGxveUFjdGlvbiB7XG4vLyAgIGNvbnN0cnVjdG9yKHBhcmVudDogU3RhZ2UsIG5hbWU6IHN0cmluZywgYXBwbGljYXRpb25OYW1lOiBzdHJpbmcsIGVudmlyb25tZW50TmFtZTogc3RyaW5nKSB7XG4vLyAgICAgc3VwZXIocGFyZW50LCBuYW1lLCAnRWxhc3RpY0JlYW5zdGFsaycsIHsgbWluSW5wdXRzOiAxLCBtYXhJbnB1dHM6IDEsIG1pbk91dHB1dHM6IDAsIG1heE91dHB1dHM6IDAgfSwge1xuLy8gICAgICAgQXBwbGljYXRpb25OYW1lOiBhcHBsaWNhdGlvbk5hbWUsXG4vLyAgICAgICBFbnZpcm9ubWVudE5hbWU6IGVudmlyb25tZW50TmFtZVxuLy8gICAgIH0pO1xuLy8gICB9XG4vLyB9XG5cbi8vIGV4cG9ydCBjbGFzcyBPcHNXb3Jrc0RlcGxveSBleHRlbmRzIERlcGxveUFjdGlvbiB7XG4vLyAgIGNvbnN0cnVjdG9yKHBhcmVudDogU3RhZ2UsIG5hbWU6IHN0cmluZywgYXBwOiBzdHJpbmcsIHN0YWNrOiBzdHJpbmcsIGxheWVyPzogc3RyaW5nKSB7XG4vLyAgICAgc3VwZXIocGFyZW50LCBuYW1lLCAnT3BzV29ya3MnLCB7IG1pbklucHV0czogMSwgbWF4SW5wdXRzOiAxLCBtaW5PdXRwdXRzOiAwLCBtYXhPdXRwdXRzOiAwIH0sIHtcbi8vICAgICAgIFN0YWNrOiBzdGFjayxcbi8vICAgICAgIEFwcDogYXBwLFxuLy8gICAgICAgTGF5ZXI6IGxheWVyLFxuLy8gICAgIH0pO1xuLy8gICB9XG4vLyB9XG5cbi8vIGV4cG9ydCBjbGFzcyBFQ1NEZXBsb3kgZXh0ZW5kcyBEZXBsb3lBY3Rpb24ge1xuLy8gICBjb25zdHJ1Y3RvcihwYXJlbnQ6IFN0YWdlLCBuYW1lOiBzdHJpbmcsIGNsdXN0ZXJOYW1lOiBzdHJpbmcsIHNlcnZpY2VOYW1lOiBzdHJpbmcsIGZpbGVOYW1lPzogc3RyaW5nKSB7XG4vLyAgICAgc3VwZXIocGFyZW50LCBuYW1lLCAnRUNTJywgeyBtaW5JbnB1dHM6IDEsIG1heElucHV0czogMSwgbWluT3V0cHV0czogMCwgbWF4T3V0cHV0czogMCB9LCB7XG4vLyAgICAgICBDbHVzdGVyTmFtZTogY2x1c3Rlck5hbWUsXG4vLyAgICAgICBTZXJ2aWNlTmFtZTogc2VydmljZU5hbWUsXG4vLyAgICAgICBGaWxlTmFtZTogZmlsZU5hbWUsXG4vLyAgICAgfSk7XG4vLyAgIH1cbi8vIH1cblxuLypcbiAgVE9ETzogQSBKZW5raW5zIGJ1aWxkIG5lZWRzIGEgY29ycmVzcG9uZGluZyBjdXN0b20gYWN0aW9uIGZvciBlYWNoIFwiSmVua2lucyBwcm92aWRlclwiLlxuICAgIFRoaXMgc2hvdWxkIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseS5cblxuICBFeGFtcGxlIGN1c3RvbSBhY3Rpb24gY3JlYXRlZCB0byBleGVjdXRlIEplbmtpbnM6XG4gIHtcbiAgXCJpZFwiOiB7XG4gICAgXCJjYXRlZ29yeVwiOiBcIlRlc3RcIixcbiAgICBcInByb3ZpZGVyXCI6IFwiPHByb3ZpZGVyIG5hbWU+XCIsXG4gICAgXCJvd25lclwiOiBcIkN1c3RvbVwiLFxuICAgIFwidmVyc2lvblwiOiBcIjFcIlxuICB9LFxuICBcIm91dHB1dEFydGlmYWN0RGV0YWlsc1wiOiB7XG4gICAgXCJtaW5pbXVtQ291bnRcIjogMCxcbiAgICBcIm1heGltdW1Db3VudFwiOiA1XG4gIH0sXG4gIFwic2V0dGluZ3NcIjoge1xuICAgIFwiZXhlY3V0aW9uVXJsVGVtcGxhdGVcIjogXCJodHRwczovL3d3dy5nb29nbGUuY29tL2pvYi97Q29uZmlnOlByb2plY3ROYW1lfS97RXh0ZXJuYWxFeGVjdXRpb25JZH1cIixcbiAgICBcImVudGl0eVVybFRlbXBsYXRlXCI6IFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9qb2Ive0NvbmZpZzpQcm9qZWN0TmFtZX1cIlxuICB9LFxuICBcImFjdGlvbkNvbmZpZ3VyYXRpb25Qcm9wZXJ0aWVzXCI6IFtcbiAgICB7XG4gICAgICBcInF1ZXJ5YWJsZVwiOiB0cnVlLFxuICAgICAgXCJrZXlcIjogdHJ1ZSxcbiAgICAgIFwibmFtZVwiOiBcIlByb2plY3ROYW1lXCIsXG4gICAgICBcInJlcXVpcmVkXCI6IHRydWUsXG4gICAgICBcInNlY3JldFwiOiBmYWxzZVxuICAgIH1cbiAgXSxcbiAgXCJpbnB1dEFydGlmYWN0RGV0YWlsc1wiOiB7XG4gICAgXCJtaW5pbXVtQ291bnRcIjogMCxcbiAgICBcIm1heGltdW1Db3VudFwiOiA1XG4gIH1cbiAgfVxuKi9cblxuLy8gZXhwb3J0IGNsYXNzIEplbmtpbnNCdWlsZCBleHRlbmRzIEJ1aWxkQWN0aW9uIHtcbi8vICAgY29uc3RydWN0b3IocGFyZW50OiBTdGFnZSwgbmFtZTogc3RyaW5nLCBqZW5raW5zUHJvdmlkZXI6IHN0cmluZywgcHJvamVjdDogc3RyaW5nKSB7XG4vLyAgICAgc3VwZXIocGFyZW50LCBuYW1lLCBqZW5raW5zUHJvdmlkZXIsIERlZmF1bHRCb3VuZHMoKSwge1xuLy8gICAgICAgUHJvamVjdE5hbWU6IHByb2plY3Rcbi8vICAgICB9KTtcbi8vICAgfVxuLy8gfVxuXG4vLyBleHBvcnQgY2xhc3MgSmVua2luc1Rlc3QgZXh0ZW5kcyBUZXN0QWN0aW9uIHtcbi8vICAgY29uc3RydWN0b3IocGFyZW50OiBTdGFnZSwgbmFtZTogc3RyaW5nLCBqZW5raW5zUHJvdmlkZXI6IHN0cmluZywgcHJvamVjdDogc3RyaW5nKSB7XG4vLyAgICAgc3VwZXIocGFyZW50LCBuYW1lLCBqZW5raW5zUHJvdmlkZXIsIERlZmF1bHRCb3VuZHMoKSwge1xuLy8gICAgICAgUHJvamVjdE5hbWU6IHByb2plY3Rcbi8vICAgICB9KTtcbi8vICAgfVxuLy8gfVxuIl19