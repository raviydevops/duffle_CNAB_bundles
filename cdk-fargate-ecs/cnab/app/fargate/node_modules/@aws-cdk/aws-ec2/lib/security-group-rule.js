"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const connections_1 = require("./connections");
/**
 * A connection to and from a given IP range
 */
class CidrIPv4 {
    constructor(cidrIp) {
        this.cidrIp = cidrIp;
        this.canInlineRule = true;
        this.connections = new connections_1.Connections({ securityGroupRule: this });
        this.uniqueId = cidrIp;
    }
    /**
     * Produce the ingress rule JSON for the given connection
     */
    toIngressRuleJSON() {
        return { cidrIp: this.cidrIp };
    }
    /**
     * Produce the egress rule JSON for the given connection
     */
    toEgressRuleJSON() {
        return { cidrIp: this.cidrIp };
    }
}
exports.CidrIPv4 = CidrIPv4;
/**
 * Any IPv4 address
 */
class AnyIPv4 extends CidrIPv4 {
    constructor() {
        super("0.0.0.0/0");
    }
}
exports.AnyIPv4 = AnyIPv4;
/**
 * A connection to a from a given IPv6 range
 */
class CidrIPv6 {
    constructor(cidrIpv6) {
        this.cidrIpv6 = cidrIpv6;
        this.canInlineRule = true;
        this.connections = new connections_1.Connections({ securityGroupRule: this });
        this.uniqueId = cidrIpv6;
    }
    /**
     * Produce the ingress rule JSON for the given connection
     */
    toIngressRuleJSON() {
        return { cidrIpv6: this.cidrIpv6 };
    }
    /**
     * Produce the egress rule JSON for the given connection
     */
    toEgressRuleJSON() {
        return { cidrIpv6: this.cidrIpv6 };
    }
}
exports.CidrIPv6 = CidrIPv6;
/**
 * Any IPv6 address
 */
class AnyIPv6 extends CidrIPv6 {
    constructor() {
        super("::0/0");
    }
}
exports.AnyIPv6 = AnyIPv6;
/**
 * A prefix list
 *
 * Prefix lists are used to allow traffic to VPC-local service endpoints.
 *
 * For more information, see this page:
 *
 * https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-endpoints.html
 */
class PrefixList {
    constructor(prefixListId) {
        this.prefixListId = prefixListId;
        this.canInlineRule = true;
        this.connections = new connections_1.Connections({ securityGroupRule: this });
        this.uniqueId = prefixListId;
    }
    toIngressRuleJSON() {
        throw new Error('Prefix lists can only be used for egress rules');
    }
    toEgressRuleJSON() {
        return { destinationPrefixListId: this.prefixListId };
    }
}
exports.PrefixList = PrefixList;
/**
 * Protocol for use in Connection Rules
 */
var Protocol;
(function (Protocol) {
    Protocol["All"] = "-1";
    Protocol["Tcp"] = "tcp";
    Protocol["Udp"] = "udp";
    Protocol["Icmp"] = "icmp";
    Protocol["Icmpv6"] = "58";
})(Protocol = exports.Protocol || (exports.Protocol = {}));
/**
 * A single TCP port
 */
class TcpPort {
    constructor(port) {
        this.port = port;
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Tcp,
            fromPort: this.port,
            toPort: this.port
        };
    }
    toString() {
        return `${this.port}`;
    }
}
exports.TcpPort = TcpPort;
/**
 * A single TCP port that is provided by a resource attribute
 */
class TcpPortFromAttribute {
    constructor(port) {
        this.port = port;
        this.canInlineRule = false;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Tcp,
            fromPort: this.port,
            toPort: this.port
        };
    }
    toString() {
        return '{IndirectPort}';
    }
}
exports.TcpPortFromAttribute = TcpPortFromAttribute;
/**
 * A TCP port range
 */
class TcpPortRange {
    constructor(startPort, endPort) {
        this.startPort = startPort;
        this.endPort = endPort;
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Tcp,
            fromPort: this.startPort,
            toPort: this.endPort
        };
    }
    toString() {
        return `${this.startPort}-${this.endPort}`;
    }
}
exports.TcpPortRange = TcpPortRange;
/**
 * All TCP Ports
 */
class TcpAllPorts {
    constructor() {
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Tcp,
            fromPort: 0,
            toPort: 65535
        };
    }
    toString() {
        return 'ALL PORTS';
    }
}
exports.TcpAllPorts = TcpAllPorts;
/**
 * A single UDP port
 */
class UdpPort {
    constructor(port) {
        this.port = port;
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Udp,
            fromPort: this.port,
            toPort: this.port
        };
    }
    toString() {
        return `UDP ${this.port}`;
    }
}
exports.UdpPort = UdpPort;
/**
 * A single UDP port that is provided by a resource attribute
 */
class UdpPortFromAttribute {
    constructor(port) {
        this.port = port;
        this.canInlineRule = false;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Udp,
            fromPort: this.port,
            toPort: this.port
        };
    }
    toString() {
        return 'UDP {IndirectPort}';
    }
}
exports.UdpPortFromAttribute = UdpPortFromAttribute;
/**
 * A UDP port range
 */
class UdpPortRange {
    constructor(startPort, endPort) {
        this.startPort = startPort;
        this.endPort = endPort;
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Udp,
            fromPort: this.startPort,
            toPort: this.endPort
        };
    }
    toString() {
        return `UDP ${this.startPort}-${this.endPort}`;
    }
}
exports.UdpPortRange = UdpPortRange;
/**
 * All UDP Ports
 */
class UdpAllPorts {
    constructor() {
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Udp,
            fromPort: 0,
            toPort: 65535
        };
    }
    toString() {
        return 'UDP ALL PORTS';
    }
}
exports.UdpAllPorts = UdpAllPorts;
/**
 * A set of matching ICMP Type & Code
 */
class IcmpTypeAndCode {
    constructor(type, code) {
        this.type = type;
        this.code = code;
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Icmp,
            fromPort: this.type,
            toPort: this.code
        };
    }
    toString() {
        return `ICMP Type ${this.type} Code ${this.code}`;
    }
}
exports.IcmpTypeAndCode = IcmpTypeAndCode;
/**
 * ICMP Ping traffic
 */
class IcmpPing {
    constructor() {
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Icmp,
            fromPort: 8,
            toPort: -1
        };
    }
    toString() {
        return `ICMP PING`;
    }
}
exports.IcmpPing = IcmpPing;
/**
 * All ICMP Codes for a given ICMP Type
 */
class IcmpAllTypeCodes {
    constructor(type) {
        this.type = type;
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Icmp,
            fromPort: this.type,
            toPort: -1
        };
    }
    toString() {
        return `ICMP Type ${this.type}`;
    }
}
exports.IcmpAllTypeCodes = IcmpAllTypeCodes;
/**
 * All ICMP Types & Codes
 */
class IcmpAllTypesAndCodes {
    constructor() {
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: Protocol.Icmp,
            fromPort: -1,
            toPort: -1
        };
    }
    toString() {
        return 'ALL ICMP';
    }
}
exports.IcmpAllTypesAndCodes = IcmpAllTypesAndCodes;
/**
 * All Traffic
 */
class AllTraffic {
    constructor() {
        this.canInlineRule = true;
    }
    toRuleJSON() {
        return {
            ipProtocol: '-1',
        };
    }
    toString() {
        return 'ALL TRAFFIC';
    }
}
exports.AllTraffic = AllTraffic;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdXJpdHktZ3JvdXAtcnVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlY3VyaXR5LWdyb3VwLXJ1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQ0FBMEQ7QUEyQjFEOztHQUVHO0FBQ0gsTUFBYSxRQUFRO0lBS25CLFlBQTZCLE1BQWM7UUFBZCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBSjNCLGtCQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLGdCQUFXLEdBQWdCLElBQUkseUJBQVcsQ0FBQyxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFJdEYsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksaUJBQWlCO1FBQ3RCLE9BQU8sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2pDLENBQUM7SUFDRDs7T0FFRztJQUNJLGdCQUFnQjtRQUNyQixPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0NBQ0Y7QUFyQkQsNEJBcUJDO0FBRUQ7O0dBRUc7QUFDSCxNQUFhLE9BQVEsU0FBUSxRQUFRO0lBQ25DO1FBQ0UsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7Q0FDRjtBQUpELDBCQUlDO0FBRUQ7O0dBRUc7QUFDSCxNQUFhLFFBQVE7SUFLbkIsWUFBNkIsUUFBZ0I7UUFBaEIsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUo3QixrQkFBYSxHQUFHLElBQUksQ0FBQztRQUNyQixnQkFBVyxHQUFnQixJQUFJLHlCQUFXLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBSXRGLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7T0FFRztJQUNJLGlCQUFpQjtRQUN0QixPQUFPLEVBQUUsUUFBUSxFQUFF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QUFDO0lBV3ZDLENBQUM7SUFUUSxVQUFVO1FBQ2YsT0FBTztZQUNMLFVBQVUsRUFBRSxJQUFJO1NBQ2pCLENBQUM7SUFDSixDQUFDO0lBRU0sUUFBUTtRQUNiLE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUM7Q0FDRjtBQVpELGdDQVlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGlvbnMsIElDb25uZWN0YWJsZSB9IGZyb20gXCIuL2Nvbm5lY3Rpb25zXCI7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBjbGFzc2VzIHRoYXQgcHJvdmlkZSB0aGUgcGVlci1zcGVjaWZpY2F0aW9uIHBhcnRzIG9mIGEgc2VjdXJpdHkgZ3JvdXAgcnVsZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTZWN1cml0eUdyb3VwUnVsZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBydWxlIGNhbiBiZSBpbmxpbmVkIGludG8gYSBTZWN1cml0eUdyb3VwIG9yIG5vdFxuICAgKi9cbiAgcmVhZG9ubHkgY2FuSW5saW5lUnVsZTogYm9vbGVhbjtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBjb25uZWN0aW9uIHBlZXJcbiAgICovXG4gIHJlYWRvbmx5IHVuaXF1ZUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2R1Y2UgdGhlIGluZ3Jlc3MgcnVsZSBKU09OIGZvciB0aGUgZ2l2ZW4gY29ubmVjdGlvblxuICAgKi9cbiAgdG9JbmdyZXNzUnVsZUpTT04oKTogYW55O1xuXG4gIC8qKlxuICAgKiBQcm9kdWNlIHRoZSBlZ3Jlc3MgcnVsZSBKU09OIGZvciB0aGUgZ2l2ZW4gY29ubmVjdGlvblxuICAgKi9cbiAgdG9FZ3Jlc3NSdWxlSlNPTigpOiBhbnk7XG59XG5cbi8qKlxuICogQSBjb25uZWN0aW9uIHRvIGFuZCBmcm9tIGEgZ2l2ZW4gSVAgcmFuZ2VcbiAqL1xuZXhwb3J0IGNsYXNzIENpZHJJUHY0IGltcGxlbWVudHMgSVNlY3VyaXR5R3JvdXBSdWxlLCBJQ29ubmVjdGFibGUge1xuICBwdWJsaWMgcmVhZG9ubHkgY2FuSW5saW5lUnVsZSA9IHRydWU7XG4gIHB1YmxpYyByZWFkb25seSBjb25uZWN0aW9uczogQ29ubmVjdGlvbnMgPSBuZXcgQ29ubmVjdGlvbnMoeyBzZWN1cml0eUdyb3VwUnVsZTogdGhpcyB9KTtcbiAgcHVibGljIHJlYWRvbmx5IHVuaXF1ZUlkOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBjaWRySXA6IHN0cmluZykge1xuICAgIHRoaXMudW5pcXVlSWQgPSBjaWRySXA7XG4gIH1cblxuICAvKipcbiAgICogUHJvZHVjZSB0aGUgaW5ncmVzcyBydWxlIEpTT04gZm9yIHRoZSBnaXZlbiBjb25uZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgdG9JbmdyZXNzUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4geyBjaWRySXA6IHRoaXMuY2lkcklwIH07XG4gIH1cbiAgLyoqXG4gICAqIFByb2R1Y2UgdGhlIGVncmVzcyBydWxlIEpTT04gZm9yIHRoZSBnaXZlbiBjb25uZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgdG9FZ3Jlc3NSdWxlSlNPTigpOiBhbnkge1xuICAgIHJldHVybiB7IGNpZHJJcDogdGhpcy5jaWRySXAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEFueSBJUHY0IGFkZHJlc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEFueUlQdjQgZXh0ZW5kcyBDaWRySVB2NCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiMC4wLjAuMC8wXCIpO1xuICB9XG59XG5cbi8qKlxuICogQSBjb25uZWN0aW9uIHRvIGEgZnJvbSBhIGdpdmVuIElQdjYgcmFuZ2VcbiAqL1xuZXhwb3J0IGNsYXNzIENpZHJJUHY2IGltcGxlbWVudHMgSVNlY3VyaXR5R3JvdXBSdWxlLCBJQ29ubmVjdGFibGUge1xuICBwdWJsaWMgcmVhZG9ubHkgY2FuSW5saW5lUnVsZSA9IHRydWU7XG4gIHB1YmxpYyByZWFkb25seSBjb25uZWN0aW9uczogQ29ubmVjdGlvbnMgPSBuZXcgQ29ubmVjdGlvbnMoeyBzZWN1cml0eUdyb3VwUnVsZTogdGhpcyB9KTtcbiAgcHVibGljIHJlYWRvbmx5IHVuaXF1ZUlkOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBjaWRySXB2Njogc3RyaW5nKSB7XG4gICAgdGhpcy51bmlxdWVJZCA9IGNpZHJJcHY2O1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2R1Y2UgdGhlIGluZ3Jlc3MgcnVsZSBKU09OIGZvciB0aGUgZ2l2ZW4gY29ubmVjdGlvblxuICAgKi9cbiAgcHVibGljIHRvSW5ncmVzc1J1bGVKU09OKCk6IGFueSB7XG4gICAgcmV0dXJuIHsgY2lkcklwdjY6IHRoaXMuY2lkcklwdjYgfTtcbiAgfVxuICAvKipcbiAgICogUHJvZHVjZSB0aGUgZWdyZXNzIHJ1bGUgSlNPTiBmb3IgdGhlIGdpdmVuIGNvbm5lY3Rpb25cbiAgICovXG4gIHB1YmxpYyB0b0VncmVzc1J1bGVKU09OKCk6IGFueSB7XG4gICAgcmV0dXJuIHsgY2lkcklwdjY6IHRoaXMuY2lkcklwdjYgfTtcbiAgfVxufVxuXG4vKipcbiAqIEFueSBJUHY2IGFkZHJlc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEFueUlQdjYgZXh0ZW5kcyBDaWRySVB2NiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiOjowLzBcIik7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHByZWZpeCBsaXN0XG4gKlxuICogUHJlZml4IGxpc3RzIGFyZSB1c2VkIHRvIGFsbG93IHRyYWZmaWMgdG8gVlBDLWxvY2FsIHNlcnZpY2UgZW5kcG9pbnRzLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhpcyBwYWdlOlxuICpcbiAqIGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BbWF6b25WUEMvbGF0ZXN0L1VzZXJHdWlkZS92cGMtZW5kcG9pbnRzLmh0bWxcbiAqL1xuZXhwb3J0IGNsYXNzIFByZWZpeExpc3QgaW1wbGVtZW50cyBJU2VjdXJpdHlHcm91cFJ1bGUsIElDb25uZWN0YWJsZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcbiAgcHVibGljIHJlYWRvbmx5IGNvbm5lY3Rpb25zOiBDb25uZWN0aW9ucyA9IG5ldyBDb25uZWN0aW9ucyh7IHNlY3VyaXR5R3JvdXBSdWxlOiB0aGlzIH0pO1xuICBwdWJsaWMgcmVhZG9ubHkgdW5pcXVlSWQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHByZWZpeExpc3RJZDogc3RyaW5nKSB7XG4gICAgdGhpcy51bmlxdWVJZCA9IHByZWZpeExpc3RJZDtcbiAgfVxuXG4gIHB1YmxpYyB0b0luZ3Jlc3NSdWxlSlNPTigpOiBhbnkge1xuICAgIHRocm93IG5ldyBFcnJvcignUHJlZml4IGxpc3RzIGNhbiBvbmx5IGJlIHVzZWQgZm9yIGVncmVzcyBydWxlcycpO1xuICB9XG5cbiAgcHVibGljIHRvRWdyZXNzUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4geyBkZXN0aW5hdGlvblByZWZpeExpc3RJZDogdGhpcy5wcmVmaXhMaXN0SWQgfTtcbiAgfVxufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgY2xhc3NlcyB0aGF0IHByb3ZpZGUgdGhlIGNvbm5lY3Rpb24tc3BlY2lmaWNhdGlvbiBwYXJ0cyBvZiBhIHNlY3VyaXR5IGdyb3VwIHJ1bGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJUG9ydFJhbmdlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHJ1bGUgY29udGFpbmluZyB0aGlzIHBvcnQgcmFuZ2UgY2FuIGJlIGlubGluZWQgaW50byBhIHNlY3VyaXR5Z3JvdXAgb3Igbm90LlxuICAgKi9cbiAgcmVhZG9ubHkgY2FuSW5saW5lUnVsZTogYm9vbGVhbjtcblxuICAvKipcbiAgICogUHJvZHVjZSB0aGUgaW5ncmVzcy9lZ3Jlc3MgcnVsZSBKU09OIGZvciB0aGUgZ2l2ZW4gY29ubmVjdGlvblxuICAgKi9cbiAgdG9SdWxlSlNPTigpOiBhbnk7XG59XG5cbi8qKlxuICogUHJvdG9jb2wgZm9yIHVzZSBpbiBDb25uZWN0aW9uIFJ1bGVzXG4gKi9cbmV4cG9ydCBlbnVtIFByb3RvY29sIHtcbiAgQWxsID0gJy0xJyxcbiAgVGNwID0gJ3RjcCcsXG4gIFVkcCA9ICd1ZHAnLFxuICBJY21wID0gJ2ljbXAnLFxuICBJY21wdjYgPSAnNTgnLFxufVxuXG4vKipcbiAqIEEgc2luZ2xlIFRDUCBwb3J0XG4gKi9cbmV4cG9ydCBjbGFzcyBUY3BQb3J0IGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHBvcnQ6IG51bWJlcikge1xuICB9XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuVGNwLFxuICAgICAgZnJvbVBvcnQ6IHRoaXMucG9ydCxcbiAgICAgIHRvUG9ydDogdGhpcy5wb3J0XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5wb3J0fWA7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHNpbmdsZSBUQ1AgcG9ydCB0aGF0IGlzIHByb3ZpZGVkIGJ5IGEgcmVzb3VyY2UgYXR0cmlidXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBUY3BQb3J0RnJvbUF0dHJpYnV0ZSBpbXBsZW1lbnRzIElQb3J0UmFuZ2Uge1xuICBwdWJsaWMgcmVhZG9ubHkgY2FuSW5saW5lUnVsZSA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcG9ydDogc3RyaW5nKSB7XG4gIH1cblxuICBwdWJsaWMgdG9SdWxlSlNPTigpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBpcFByb3RvY29sOiBQcm90b2NvbC5UY3AsXG4gICAgICBmcm9tUG9ydDogdGhpcy5wb3J0LFxuICAgICAgdG9Qb3J0OiB0aGlzLnBvcnRcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAne0luZGlyZWN0UG9ydH0nO1xuICB9XG59XG5cbi8qKlxuICogQSBUQ1AgcG9ydCByYW5nZVxuICovXG5leHBvcnQgY2xhc3MgVGNwUG9ydFJhbmdlIGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHN0YXJ0UG9ydDogbnVtYmVyLCBwcml2YXRlIHJlYWRvbmx5IGVuZFBvcnQ6IG51bWJlcikge1xuICB9XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuVGNwLFxuICAgICAgZnJvbVBvcnQ6IHRoaXMuc3RhcnRQb3J0LFxuICAgICAgdG9Qb3J0OiB0aGlzLmVuZFBvcnRcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBgJHt0aGlzLnN0YXJ0UG9ydH0tJHt0aGlzLmVuZFBvcnR9YDtcbiAgfVxufVxuXG4vKipcbiAqIEFsbCBUQ1AgUG9ydHNcbiAqL1xuZXhwb3J0IGNsYXNzIFRjcEFsbFBvcnRzIGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBwdWJsaWMgdG9SdWxlSlNPTigpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBpcFByb3RvY29sOiBQcm90b2NvbC5UY3AsXG4gICAgICBmcm9tUG9ydDogMCxcbiAgICAgIHRvUG9ydDogNjU1MzVcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAnQUxMIFBPUlRTJztcbiAgfVxufVxuXG4vKipcbiAqIEEgc2luZ2xlIFVEUCBwb3J0XG4gKi9cbmV4cG9ydCBjbGFzcyBVZHBQb3J0IGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHBvcnQ6IG51bWJlcikge1xuICB9XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuVWRwLFxuICAgICAgZnJvbVBvcnQ6IHRoaXMucG9ydCxcbiAgICAgIHRvUG9ydDogdGhpcy5wb3J0XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYFVEUCAke3RoaXMucG9ydH1gO1xuICB9XG59XG5cbi8qKlxuICogQSBzaW5nbGUgVURQIHBvcnQgdGhhdCBpcyBwcm92aWRlZCBieSBhIHJlc291cmNlIGF0dHJpYnV0ZVxuICovXG5leHBvcnQgY2xhc3MgVWRwUG9ydEZyb21BdHRyaWJ1dGUgaW1wbGVtZW50cyBJUG9ydFJhbmdlIHtcbiAgcHVibGljIHJlYWRvbmx5IGNhbklubGluZVJ1bGUgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHBvcnQ6IHN0cmluZykge1xuICB9XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuVWRwLFxuICAgICAgZnJvbVBvcnQ6IHRoaXMucG9ydCxcbiAgICAgIHRvUG9ydDogdGhpcy5wb3J0XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gJ1VEUCB7SW5kaXJlY3RQb3J0fSc7XG4gIH1cbn1cblxuLyoqXG4gKiBBIFVEUCBwb3J0IHJhbmdlXG4gKi9cbmV4cG9ydCBjbGFzcyBVZHBQb3J0UmFuZ2UgaW1wbGVtZW50cyBJUG9ydFJhbmdlIHtcbiAgcHVibGljIHJlYWRvbmx5IGNhbklubGluZVJ1bGUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc3RhcnRQb3J0OiBudW1iZXIsIHByaXZhdGUgcmVhZG9ubHkgZW5kUG9ydDogbnVtYmVyKSB7XG4gIH1cblxuICBwdWJsaWMgdG9SdWxlSlNPTigpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBpcFByb3RvY29sOiBQcm90b2NvbC5VZHAsXG4gICAgICBmcm9tUG9ydDogdGhpcy5zdGFydFBvcnQsXG4gICAgICB0b1BvcnQ6IHRoaXMuZW5kUG9ydFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBVRFAgJHt0aGlzLnN0YXJ0UG9ydH0tJHt0aGlzLmVuZFBvcnR9YDtcbiAgfVxufVxuXG4vKipcbiAqIEFsbCBVRFAgUG9ydHNcbiAqL1xuZXhwb3J0IGNsYXNzIFVkcEFsbFBvcnRzIGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBwdWJsaWMgdG9SdWxlSlNPTigpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBpcFByb3RvY29sOiBQcm90b2NvbC5VZHAsXG4gICAgICBmcm9tUG9ydDogMCxcbiAgICAgIHRvUG9ydDogNjU1MzVcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAnVURQIEFMTCBQT1JUUyc7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHNldCBvZiBtYXRjaGluZyBJQ01QIFR5cGUgJiBDb2RlXG4gKi9cbmV4cG9ydCBjbGFzcyBJY21wVHlwZUFuZENvZGUgaW1wbGVtZW50cyBJUG9ydFJhbmdlIHtcbiAgcHVibGljIHJlYWRvbmx5IGNhbklubGluZVJ1bGUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgdHlwZTogbnVtYmVyLCBwcml2YXRlIHJlYWRvbmx5IGNvZGU6IG51bWJlcikge1xuICB9XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuSWNtcCxcbiAgICAgIGZyb21Qb3J0OiB0aGlzLnR5cGUsXG4gICAgICB0b1BvcnQ6IHRoaXMuY29kZVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBJQ01QIFR5cGUgJHt0aGlzLnR5cGV9IENvZGUgJHt0aGlzLmNvZGV9YDtcbiAgfVxufVxuXG4vKipcbiAqIElDTVAgUGluZyB0cmFmZmljXG4gKi9cbmV4cG9ydCBjbGFzcyBJY21wUGluZyBpbXBsZW1lbnRzIElQb3J0UmFuZ2Uge1xuICBwdWJsaWMgcmVhZG9ubHkgY2FuSW5saW5lUnVsZSA9IHRydWU7XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuSWNtcCxcbiAgICAgIGZyb21Qb3J0OiA4LFxuICAgICAgdG9Qb3J0OiAtMVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBJQ01QIFBJTkdgO1xuICB9XG59XG5cbi8qKlxuICogQWxsIElDTVAgQ29kZXMgZm9yIGEgZ2l2ZW4gSUNNUCBUeXBlXG4gKi9cbmV4cG9ydCBjbGFzcyBJY21wQWxsVHlwZUNvZGVzIGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHR5cGU6IG51bWJlcikge1xuICB9XG5cbiAgcHVibGljIHRvUnVsZUpTT04oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXBQcm90b2NvbDogUHJvdG9jb2wuSWNtcCxcbiAgICAgIGZyb21Qb3J0OiB0aGlzLnR5cGUsXG4gICAgICB0b1BvcnQ6IC0xXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYElDTVAgVHlwZSAke3RoaXMudHlwZX1gO1xuICB9XG59XG5cbi8qKlxuICogQWxsIElDTVAgVHlwZXMgJiBDb2Rlc1xuICovXG5leHBvcnQgY2xhc3MgSWNtcEFsbFR5cGVzQW5kQ29kZXMgaW1wbGVtZW50cyBJUG9ydFJhbmdlIHtcbiAgcHVibGljIHJlYWRvbmx5IGNhbklubGluZVJ1bGUgPSB0cnVlO1xuXG4gIHB1YmxpYyB0b1J1bGVKU09OKCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlwUHJvdG9jb2w6IFByb3RvY29sLkljbXAsXG4gICAgICBmcm9tUG9ydDogLTEsXG4gICAgICB0b1BvcnQ6IC0xXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gJ0FMTCBJQ01QJztcbiAgfVxufVxuXG4vKipcbiAqIEFsbCBUcmFmZmljXG4gKi9cbmV4cG9ydCBjbGFzcyBBbGxUcmFmZmljIGltcGxlbWVudHMgSVBvcnRSYW5nZSB7XG4gIHB1YmxpYyByZWFkb25seSBjYW5JbmxpbmVSdWxlID0gdHJ1ZTtcblxuICBwdWJsaWMgdG9SdWxlSlNPTigpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBpcFByb3RvY29sOiAnLTEnLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuICdBTEwgVFJBRkZJQyc7XG4gIH1cbn0iXX0=